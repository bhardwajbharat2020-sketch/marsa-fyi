{"ast":null,"code":"import React,{createContext,useContext,useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext();export function useAuth(){return useContext(AuthContext);}export function AuthProvider(_ref){let{children}=_ref;const[currentUser,setCurrentUser]=useState(null);const[userRole,setUserRole]=useState(null);const[loading,setLoading]=useState(true);// Initialize auth state from localStorage\nuseEffect(()=>{const storedUser=localStorage.getItem('marsafyi_user');const storedRole=localStorage.getItem('marsafyi_role');if(storedUser){setCurrentUser(JSON.parse(storedUser));}if(storedRole){setUserRole(storedRole);}setLoading(false);},[]);function login(userData,role){setCurrentUser(userData);setUserRole(role);localStorage.setItem('marsafyi_user',JSON.stringify(userData));localStorage.setItem('marsafyi_role',role);}function logout(){setCurrentUser(null);setUserRole(null);localStorage.removeItem('marsafyi_user');localStorage.removeItem('marsafyi_role');}function switchRole(newRole){setUserRole(newRole);localStorage.setItem('marsafyi_role',newRole);}const value={currentUser,userRole,login,logout,switchRole};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:value,children:!loading&&children});}","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","jsx","_jsx","AuthContext","useAuth","AuthProvider","_ref","children","currentUser","setCurrentUser","userRole","setUserRole","loading","setLoading","storedUser","localStorage","getItem","storedRole","JSON","parse","login","userData","role","setItem","stringify","logout","removeItem","switchRole","newRole","value","Provider"],"sources":["C:/Users/bhard/OneDrive/Desktop/marsa-fyi/client/src/contexts/AuthContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport function useAuth() {\r\n  return useContext(AuthContext);\r\n}\r\n\r\nexport function AuthProvider({ children }) {\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n  const [userRole, setUserRole] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Initialize auth state from localStorage\r\n  useEffect(() => {\r\n    const storedUser = localStorage.getItem('marsafyi_user');\r\n    const storedRole = localStorage.getItem('marsafyi_role');\r\n    \r\n    if (storedUser) {\r\n      setCurrentUser(JSON.parse(storedUser));\r\n    }\r\n    \r\n    if (storedRole) {\r\n      setUserRole(storedRole);\r\n    }\r\n    \r\n    setLoading(false);\r\n  }, []);\r\n\r\n  function login(userData, role) {\r\n    setCurrentUser(userData);\r\n    setUserRole(role);\r\n    localStorage.setItem('marsafyi_user', JSON.stringify(userData));\r\n    localStorage.setItem('marsafyi_role', role);\r\n  }\r\n\r\n  function logout() {\r\n    setCurrentUser(null);\r\n    setUserRole(null);\r\n    localStorage.removeItem('marsafyi_user');\r\n    localStorage.removeItem('marsafyi_role');\r\n  }\r\n\r\n  function switchRole(newRole) {\r\n    setUserRole(newRole);\r\n    localStorage.setItem('marsafyi_role', newRole);\r\n  }\r\n\r\n  const value = {\r\n    currentUser,\r\n    userRole,\r\n    login,\r\n    logout,\r\n    switchRole\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {!loading && children}\r\n    </AuthContext.Provider>\r\n  );\r\n}"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,UAAU,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE9E,KAAM,CAAAC,WAAW,cAAGN,aAAa,CAAC,CAAC,CAEnC,MAAO,SAAS,CAAAO,OAAOA,CAAA,CAAG,CACxB,MAAO,CAAAN,UAAU,CAACK,WAAW,CAAC,CAChC,CAEA,MAAO,SAAS,CAAAE,YAAYA,CAAAC,IAAA,CAAe,IAAd,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACvC,KAAM,CAACE,WAAW,CAAEC,cAAc,CAAC,CAAGV,QAAQ,CAAC,IAAI,CAAC,CACpD,KAAM,CAACW,QAAQ,CAAEC,WAAW,CAAC,CAAGZ,QAAQ,CAAC,IAAI,CAAC,CAC9C,KAAM,CAACa,OAAO,CAAEC,UAAU,CAAC,CAAGd,QAAQ,CAAC,IAAI,CAAC,CAE5C;AACAC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAc,UAAU,CAAGC,YAAY,CAACC,OAAO,CAAC,eAAe,CAAC,CACxD,KAAM,CAAAC,UAAU,CAAGF,YAAY,CAACC,OAAO,CAAC,eAAe,CAAC,CAExD,GAAIF,UAAU,CAAE,CACdL,cAAc,CAACS,IAAI,CAACC,KAAK,CAACL,UAAU,CAAC,CAAC,CACxC,CAEA,GAAIG,UAAU,CAAE,CACdN,WAAW,CAACM,UAAU,CAAC,CACzB,CAEAJ,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAAE,EAAE,CAAC,CAEN,QAAS,CAAAO,KAAKA,CAACC,QAAQ,CAAEC,IAAI,CAAE,CAC7Bb,cAAc,CAACY,QAAQ,CAAC,CACxBV,WAAW,CAACW,IAAI,CAAC,CACjBP,YAAY,CAACQ,OAAO,CAAC,eAAe,CAAEL,IAAI,CAACM,SAAS,CAACH,QAAQ,CAAC,CAAC,CAC/DN,YAAY,CAACQ,OAAO,CAAC,eAAe,CAAED,IAAI,CAAC,CAC7C,CAEA,QAAS,CAAAG,MAAMA,CAAA,CAAG,CAChBhB,cAAc,CAAC,IAAI,CAAC,CACpBE,WAAW,CAAC,IAAI,CAAC,CACjBI,YAAY,CAACW,UAAU,CAAC,eAAe,CAAC,CACxCX,YAAY,CAACW,UAAU,CAAC,eAAe,CAAC,CAC1C,CAEA,QAAS,CAAAC,UAAUA,CAACC,OAAO,CAAE,CAC3BjB,WAAW,CAACiB,OAAO,CAAC,CACpBb,YAAY,CAACQ,OAAO,CAAC,eAAe,CAAEK,OAAO,CAAC,CAChD,CAEA,KAAM,CAAAC,KAAK,CAAG,CACZrB,WAAW,CACXE,QAAQ,CACRU,KAAK,CACLK,MAAM,CACNE,UACF,CAAC,CAED,mBACEzB,IAAA,CAACC,WAAW,CAAC2B,QAAQ,EAACD,KAAK,CAAEA,KAAM,CAAAtB,QAAA,CAChC,CAACK,OAAO,EAAIL,QAAQ,CACD,CAAC,CAE3B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}